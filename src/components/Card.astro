---
import { Image } from "astro:assets"
import type { ImageMetadata } from 'astro';
import type { Product } from '../data/product';

type Props = Product;

const { photoSrc, price, additional, title, description } = Astro.props;
const images = import.meta.glob<{default: ImageMetadata}>("/src/images/*.{jpg,png}")

if (!images[photoSrc]) throw new Error(`"${photoSrc}" does not exist in glob: "src/images/*.{jpg,png}"`);
---

<div class=" w-full h-full p-3 rounded-3xl flex flex-col bg-gray-100">
	<div class="rounded-xl overflow-hidden w-full h-[240px] flex justify-center items-center bg-white">
		<Image class="w-full h-[220px] object-contain" src={images[photoSrc]()} alt={title}/>
	</div>
	<p class="mt-3 px-1 text-base text-gray-500"><b class="text-lg font-bold text-gray-900">{price}₽</b> • {additional}</p>
	<h3 class="mt-2 px-1">{title}</h3>
	<ul class="mt-2 mb-4 px-1 text-sm text-gray-500 flex flex-col gap-2">
		{ description.map(text => <li>{text}</li>)}
	</ul>
	<a class="product__button w-full mt-auto flex justify-center items-center bg-neutral-900 rounded-xl py-2 text-sm text-gray-50 transition-colors" href="https://wa.me/+966501362602">Заказать</a>
</div>

<style>
	@media (hover: hover) {
		.product__button {
			@apply hover:bg-saudi
		}
	}
</style>